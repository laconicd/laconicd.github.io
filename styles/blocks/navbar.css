@scope (.navbar) {
  :scope {
    border-block-end: var(--border-width-xs) solid var(--border-color-base);
  }

  & .brand {
    font-weight: var(--font-weight-black);
    font-size: var(--font-size-xl);
    letter-spacing: var(--letter-spacing-tighter);
  }

  & .menu-trigger {
    cursor: pointer;
    font-weight: var(--font-weight-black);
    font-size: var(--font-size-sm);
    letter-spacing: var(--letter-spacing-widest);

    & .trigger-text {
      display: none;

      &::before {
        opacity: var(--opacity-30);
        content: "[ ";
      }
      &::after {
        opacity: var(--opacity-30);
        content: " ]";
      }
    }

    & .trigger-icon {
      display: block;
      color: var(--color-base-content);
    }

    &:hover {
      color: var(--color-primary);
      & .trigger-text::before,
      & .trigger-text::after {
        opacity: var(--opacity-100);
        color: var(--color-primary);
      }
      & .trigger-icon {
        color: var(--color-primary);
      }
    }
  }

  /* Desktop View */
  @media (width >= 768px) {
    & .menu-trigger {
      & .trigger-text {
        display: block;
      }

      & .trigger-icon {
        display: none;
      }
    }
  }
}

/* --- Popover Menu Styling --- */

[popover] {
  translate: 100% 0;
  transition:
    display var(--transition-speed-normal) allow-discrete,
    overlay var(--transition-speed-normal) allow-discrete,
    translate var(--transition-speed-normal) var(--transition-timing-ease);
  margin: 0;
  inset: 0 0 0 auto;
  border: none;
  background: transparent;
  padding: 0;
  inline-size: min(100vw, 450px);
  block-size: 100dvh;
  overflow: visible;

  &:popover-open {
    translate: 0 0;

    @starting-style {
      translate: 100% 0;
    }
  }

  &::backdrop {
    backdrop-filter: blur(0px);
    transition:
      display var(--transition-speed-normal) allow-discrete,
      overlay var(--transition-speed-normal) allow-discrete,
      background-color var(--transition-speed-normal),
      backdrop-filter var(--transition-speed-normal);
    background-color: oklch(0% 0 0 / 0);
  }

  &:popover-open::backdrop {
    backdrop-filter: blur(4px);
    background-color: oklch(0% 0 0 / 0.4);

    @starting-style {
      backdrop-filter: blur(0px);
      background-color: oklch(0% 0 0 / 0);
    }
  }
}

@scope (.popover-menu) {
  :scope {
    display: flex;
    flex-direction: column;
    backdrop-filter: blur(20px);
    box-shadow: var(--shadow-lg);
    border-left: var(--border-width-xs) solid var(--border-color-base);
    background-color: oklch(from var(--color-base-100) l c h / 0.98);
    padding: var(--space-xl);
    inline-size: 100%;
    block-size: 100%;
  }

  & .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-block-end: var(--space-xxl);
    border-block-end: var(--border-width-xs) solid var(--border-color-base);
    padding-block-end: var(--space-md);
  }

  & .title {
    opacity: 0.4;
    font-weight: var(--font-weight-black);
    font-size: var(--font-size-xs);
    letter-spacing: var(--letter-spacing-widest);
    text-transform: uppercase;
  }

  & .close-btn {
    opacity: 0.6;
    transition: transform 0.3s ease, opacity 0.3s ease;
    cursor: pointer;
    border: none;
    background: none;
    color: var(--color-base-content);

    &:hover {
      transform: rotate(90deg);
      opacity: 1;
    }
  }

  & .body {
    flex: 1;
  }

  & .list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  & .link {
    display: flex;
    align-items: baseline;
    gap: var(--space-md);
    transition: all 0.3s ease;
    border-block-end: 1px solid var(--border-color-subtle);
    padding-block: var(--space-sm);
    color: inherit;
    text-decoration: none;

    & .num {
      opacity: 0.2;
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-sm);
      font-family: var(--font-family-mono);
    }

    & .text {
      transition: transform 0.3s ease;
      font-weight: var(--font-weight-black);
      font-size: var(--font-size-xxl);
      letter-spacing: var(--letter-spacing-tighter);
    }

    &:hover {
      border-block-end-color: var(--color-primary);
      padding-inline-start: var(--space-sm);
      color: var(--color-primary);

      & .text {
        transform: translateX(5px);
      }

      & .num {
        opacity: 0.6;
        color: var(--color-primary);
      }
    }
  }

  & .footer {
    margin-top: auto;
    border-top: var(--border-width-xs) solid var(--border-color-base);
    padding-top: var(--space-xl);

    & .social-links {
      display: flex;
      gap: var(--space-md);
      margin-bottom: var(--space-md);

      & a {
        opacity: 0.5;
        transition: opacity 0.3s ease, color 0.3s ease;
        color: inherit;

        &.is-active {
          border-block-end-color: var(--color-primary);
          color: var(--color-primary);

          & .num {
            opacity: 0.8;
            color: var(--color-primary);
          }
        }

        &:hover {
          opacity: 1;
          color: var(--color-primary);
        }
      }
    }

    & .copyright {
      opacity: 0.3;
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-xs);
      letter-spacing: var(--letter-spacing-wider);
      text-transform: uppercase;
    }
  }
}
