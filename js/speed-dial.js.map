{
  "version": 3,
  "sources": ["../scripts/speed-dial.ts"],
  "sourcesContent": ["export {};\n\ndeclare global {\n  interface Window {\n    __POST_LIST__?: string[];\n  }\n}\n\nclass SpeedDialManager {\n  private readonly dial: HTMLElement | null;\n  private readonly searchModal: (HTMLElement & { showPopover?: () => void }) | null;\n  private readonly posts: string[];\n\n  constructor() {\n    this.dial = document.querySelector(\".app-speed-dial\");\n    this.searchModal = document.getElementById(\"search_modal\") as any;\n    this.posts = window.__POST_LIST__ || [];\n\n    if (this.dial) {\n      this.init();\n    }\n  }\n\n  private init(): void {\n    // 초기 테마 상태 동기화\n    this.syncThemeState();\n\n    // 이벤트 리스너 등록\n    this.initClickEvents();\n\n    // 외부 클릭 시 닫기\n    document.addEventListener(\"click\", (e) => this.handleOutsideClick(e));\n\n    // 페이지 업데이트 이벤트 대응\n    window.addEventListener(\"page:updated\" as any, () => {\n      this.syncThemeState();\n      this.closeDial();\n    });\n  }\n\n  private initClickEvents(): void {\n    const trigger = document.getElementById(\"speed-dial-trigger\");\n    const topBtn = document.getElementById(\"speed-dial-top\");\n    const searchBtn = document.getElementById(\"speed-dial-search\");\n    const randomBtn = document.getElementById(\"speed-dial-random\");\n\n    // 메인 트리거 (토글)\n    trigger?.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      this.dial?.classList.toggle(\"open\");\n    });\n\n    // 위로 가기\n    topBtn?.addEventListener(\"click\", () => {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n      this.closeDial();\n    });\n\n    // 검색 모달 열기\n    searchBtn?.addEventListener(\"click\", () => {\n      this.searchModal?.showPopover?.();\n      this.closeDial();\n    });\n\n    // 랜덤 포스트 이동\n    if (randomBtn && this.posts.length > 0) {\n      randomBtn.addEventListener(\"click\", () => this.handleRandomPost());\n    }\n  }\n\n  private handleRandomPost(): void {\n    const currentPath = window.location.pathname; // href보다 pathname이 비교에 안전합니다.\n    const otherPosts = this.posts.filter((p) => !p.includes(currentPath));\n    const targetPosts = otherPosts.length > 0 ? otherPosts : this.posts;\n\n    const randomPost = targetPosts[Math.floor(Math.random() * targetPosts.length)];\n    window.location.href = randomPost;\n  }\n\n  private syncThemeState(): void {\n    if (!this.dial) return;\n    const isDark = document.documentElement.getAttribute(\"data-theme\") === \"dim\";\n\n    const controllers = this.dial.querySelectorAll<HTMLInputElement>(\".theme-controller\");\n    controllers.forEach((el) => {\n      el.checked = isDark;\n    });\n  }\n\n  private handleOutsideClick(e: MouseEvent): void {\n    if (this.dial && !this.dial.contains(e.target as Node)) {\n      this.closeDial();\n    }\n  }\n\n  private closeDial(): void {\n    this.dial?.classList.remove(\"open\");\n  }\n}\n\n// 초기화\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", () => new SpeedDialManager());\n} else {\n  new SpeedDialManager();\n}\n"],
  "mappings": "AAQA,IAAMA,EAAN,KAAM,CACa,KACA,YACA,MAEjB,aAAc,CACZ,KAAK,KAAO,SAAS,cAAc,iBAAA,EACnC,KAAK,YAAc,SAAS,eAAe,cAAA,EAC3C,KAAK,MAAQ,OAAO,eAAiB,CAAA,EAEjC,KAAK,MACP,KAAK,KAAI,CAEb,CAEQ,MAAa,CAEnB,KAAK,eAAc,EAGnB,KAAK,gBAAe,EAGpB,SAAS,iBAAiB,QAAUC,GAAM,KAAK,mBAAmBA,CAAA,CAAA,EAGlE,OAAO,iBAAiB,eAAuB,IAAA,CAC7C,KAAK,eAAc,EACnB,KAAK,UAAS,CAChB,CAAA,CACF,CAEQ,iBAAwB,CAC9B,IAAMC,EAAU,SAAS,eAAe,oBAAA,EAClCC,EAAS,SAAS,eAAe,gBAAA,EACjCC,EAAY,SAAS,eAAe,mBAAA,EACpCC,EAAY,SAAS,eAAe,mBAAA,EAG1CH,GAAS,iBAAiB,QAAUD,GAAA,CAClCA,EAAE,gBAAe,EACjB,KAAK,MAAM,UAAU,OAAO,MAAA,CAC9B,CAAA,EAGAE,GAAQ,iBAAiB,QAAS,IAAA,CAChC,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAA,EAC7C,KAAK,UAAS,CAChB,CAAA,EAGAC,GAAW,iBAAiB,QAAS,IAAA,CACnC,KAAK,aAAa,cAAA,EAClB,KAAK,UAAS,CAChB,CAAA,EAGIC,GAAa,KAAK,MAAM,OAAS,GACnCA,EAAU,iBAAiB,QAAS,IAAM,KAAK,iBAAgB,CAAA,CAEnE,CAEQ,kBAAyB,CAC/B,IAAMC,EAAc,OAAO,SAAS,SAC9BC,EAAa,KAAK,MAAM,OAAQC,GAAM,CAACA,EAAE,SAASF,CAAA,CAAA,EAClDG,EAAcF,EAAW,OAAS,EAAIA,EAAa,KAAK,MAExDG,EAAaD,EAAY,KAAK,MAAM,KAAK,OAAM,EAAKA,EAAY,MAAM,CAAA,EAC5E,OAAO,SAAS,KAAOC,CACzB,CAEQ,gBAAuB,CAC7B,GAAI,CAAC,KAAK,KAAM,OAChB,IAAMC,EAAS,SAAS,gBAAgB,aAAa,YAAA,IAAkB,MAEnD,KAAK,KAAK,iBAAmC,mBAAA,EACrD,QAASC,GAAA,CACnBA,EAAG,QAAUD,CACf,CAAA,CACF,CAEQ,mBAAmBV,EAAqB,CAC1C,KAAK,MAAQ,CAAC,KAAK,KAAK,SAASA,EAAE,MAAM,GAC3C,KAAK,UAAS,CAElB,CAEQ,WAAkB,CACxB,KAAK,MAAM,UAAU,OAAO,MAAA,CAC9B,CACF,EAGI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoB,IAAM,IAAID,CAAA,EAExD,IAAIA",
  "names": ["SpeedDialManager", "e", "trigger", "topBtn", "searchBtn", "randomBtn", "currentPath", "otherPosts", "p", "targetPosts", "randomPost", "isDark", "el"]
}
