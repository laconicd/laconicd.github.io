{% extends "base.html" %}
{% import "macros/icons.html" as icons %}
{% import "macros/image.html" as image_macros %}

{% block content %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ page.title | replace(from='"', to='\\"') | safe }}",
  "image": [
    "{{ image_macros::get_url(page=page, width=1200, height=630) }}"
  ],
  "datePublished": "{{ page.date }}",
  "dateModified": "{{ page.updated | default(value=page.date) }}",
  "author": [{
    "@type": "Person",
    "name": "{{ config.extra.author_name }}",
    "url": "{{ config.base_url }}/about/"
  }],
  "description": "{{ page.summary | default(value=page.description) | striptags | replace(from='"', to='\\"') | safe }}"
}
</script>

<article class="c-post l-stack u-mx-auto u-max-w-post" style="padding-inline: var(--space-6); padding-block: var(--space-16) 10rem;">
  <!-- Post Header -->
  <header class="c-post-header l-stack u-items-center u-text-center u-gap-8">
    <div class="c-post-meta l-cluster u-gap-2">
      {% if page.taxonomies.categories %}
        {% for cat in page.taxonomies.categories %}
          <span>{{ cat }}</span>
        {% endfor %}
        <span class="c-post-meta-separator u-fixed">â€¢</span>
      {% endif %}
      <time datetime="{{ page.date }}" class="u-fixed">{{ page.date | date(format=config.extra.date_format) }}</time>
    </div>

    <h1>{{ page.title }}</h1>

    <div class="c-post-author l-cluster u-gap-4" style="text-align: start;">
      <div class="c-post-author-avatar u-fixed">
        <img src="{{ get_url(path=config.extra.author_avatar) | safe }}" alt="{{ config.extra.author_name }}" />
      </div>
      <div class="c-post-author-info l-stack u-gap-0">
        <span class="c-post-author-name">{{ config.extra.author_name }}</span>
        <span class="c-post-author-role">{{ config.extra.author_role }}</span>
      </div>
    </div>
  </header>

  <!-- Featured Image -->
  <div class="c-post-visual u-fixed" style="--fixed-width: 100%;">
    <img src="{{ image_macros::get_url(page=page, width=1600, height=900) }}" alt="{{ page.title }}" loading="eager" />
  </div>

  <!-- Content -->
  <div class="c-post-content s-post-content u-fill">
    {{ page.content | safe }}
  </div>

  <!-- Share Section -->
  <section class="c-post-share l-stack u-items-center u-text-center u-gap-12" style="margin-block: var(--space-24) var(--space-16); padding-inline: var(--space-8); padding-block: var(--space-16);">
    <div class="c-post-share-header l-stack u-gap-0">
      <span class="c-post-share-sub">Sharing is Caring</span>
      <h2 class="c-post-share-main">Enjoyed this post?</h2>
    </div>

    <div class="c-post-share-copy l-bar u-gap-4" style="padding-inline: 2rem 0.6rem; padding-block: 0.6rem;">
      <div class="c-post-share-url u-fill l-cluster u-gap-4" style="justify-content: flex-start;">
        <span class="u-fixed">{{ icons::link(size=5) }}</span>
        <span class="c-post-share-url-text u-fill js-share-url">{{ current_url | safe }}</span>
      </div>
      <button id="post-share-btn" class="c-post-share-btn u-fixed js-share-btn">
        <span class="label js-share-label">Copy Link</span>
      </button>
    </div>

    <div class="c-post-share-social l-cluster u-gap-6" style="justify-content: center;">
      <a href="https://twitter.com/intent/tweet?url={{ current_url | safe }}&text={{ page.title }}"
         target="_blank" rel="noopener noreferrer" class="c-post-share-social-item l-center u-fixed" title="Share on X">
        {{ icons::x(size=6) }}
      </a>

      <a href="{{ get_url(path='@/posts/_index.md') }}" class="c-post-share-social-item l-center u-fixed" title="Back to Archive">
        {{ icons::post(size=6) }}
      </a>

      <a href="/" class="c-post-share-social-item l-center u-fixed" title="Go Home">
        {{ icons::home(size=6) }}
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="c-post-footer l-stack u-gap-16" style="margin-block-start: var(--space-16); padding-block-start: var(--space-16);">
    {% if page.taxonomies.tags %}
      <div class="c-post-tags l-cluster u-gap-2">
        {% for tag in page.taxonomies.tags %}
          <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}">
            #{{ tag }}
          </a>
        {% endfor %}
      </div>
    {% endif %}

    <nav class="c-post-nav l-grid u-gap-6" style="--min-width: 15rem;">
      {% if page.lower %}
        <a href="{{ page.lower.path }}" class="c-post-nav-card prev l-stack u-gap-2">
          <span class="c-post-nav-label">Previous Post</span>
          <span class="c-post-nav-title">{{ page.lower.title }}</span>
        </a>
      {% endif %}

      {% if page.higher %}
        <a href="{{ page.higher.path }}" class="c-post-nav-card is-next l-stack u-gap-2">
          <span class="c-post-nav-label">Next Post</span>
          <span class="c-post-nav-title">{{ page.higher.title }}</span>
        </a>
      {% endif %}
    </nav>
  </footer>

  <script src="{{ get_url(path='js/post.js') | safe }}"></script>
</article>
{% endblock content %}
