{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock title %}

{% block content %}

<main class="flex flex-col lg:flex-row gap-8 lg:gap-12">
    <!-- Main Content -->
    <div class="w-full lg:w-2/3">
        <!-- Article Header -->
        <header class="text-center mb-12">
            <div class="flex items-center justify-center gap-2 mb-4">
                <div class="text-sm font-semibold text-primary tracking-wide uppercase">
                    {{ page.date | date(format=config.extra.date_format) }}
                </div>
                {% if page.taxonomies.categories %}
                <span class="text-base-content/40">â€¢</span>
                <a href="{{ get_taxonomy_url(kind='categories', name=page.taxonomies.categories[0]) }}" class="text-sm font-bold text-secondary uppercase tracking-widest hover:underline">
                    {{ page.taxonomies.categories[0] }}
                </a>
                {% endif %}
            </div>
            <h1 class="text-4xl md:text-5xl font-bold mb-6 leading-tight">{{ page.title }}</h1>

            <div class="flex items-center justify-center gap-4">
                <div class="avatar placeholder">
                    <div class="bg-neutral text-neutral-content rounded-full w-12">
                        <span class="text-xl">{{ config.extra.author_name | truncate(length=1, end="") | upper }}</span>
                    </div>
                </div>
                <div class="text-left">
                    <div class="font-bold">{{ config.extra.author_name }}</div>
                    <div class="text-xs text-base-content/60">{{ config.extra.author_role }}</div>
                </div>
            </div>
        </header>

        <!-- Featured Image -->
        {% if page.extra.cover %}
        <figure class="mb-16 -mx-4 overflow-hidden rounded-xl shadow-2xl">
            {% set image = get_image_metadata(path=page.extra.cover) %}
            <img src="{{ get_url(path=page.extra.cover) }}" alt="{{ page.title }}" class="w-full object-cover"
                width="{{ image.width }}" height="{{ image.height }}" />
        </figure>
        {% endif %}

        <article class="prose prose-lg md:prose-xl max-w-none">
            {% include "partials/post_toc_mobile.html" %}
            {{ page.content | safe }}
        </article>

        <!-- Post Navigation -->
        <footer class="mt-16">
            {% include "partials/post_nav.html" %}
        </footer>
    </div>

    <!-- Sidebar Column -->
    <aside class="w-full lg:w-1/3">
        {% include "partials/post_sidebar.html" %}
    </aside>
</main>

{% endblock content %}