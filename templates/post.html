{% extends "base.html" %}
{% import "macros/icons.html" as icons %}
{% import "macros/image.html" as image_macros %}

{% block content %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ page.title | replace(from='"', to='\\"') | safe }}",
  "image": [
    "{{ image_macros::get_url(page=page, width=1200, height=630) }}"
  ],
  "datePublished": "{{ page.date }}",
  "dateModified": "{{ page.updated | default(value=page.date) }}",
  "author": [{
    "@type": "Person",
    "name": "{{ config.extra.author_name }}",
    "url": "{{ config.base_url }}/about/"
  }],
  "description": "{{ page.summary | default(value=page.description) | striptags | replace(from='"', to='\\"') | safe }}"
}
</script>

<article class="c-post l-stack u-mx-auto u-max-w-post" style="--space: var(--section-gap); padding-inline: var(--space-6); padding-block: var(--space-16) 10rem;">
  <!-- Post Header -->
  <header class="post-header l-stack l-center" style="--space: var(--space-8);">
    <div class="post-meta l-cluster" style="--space: 0.75rem;">
      {% if page.taxonomies.categories %}
        {% for cat in page.taxonomies.categories %}
          <span>{{ cat }}</span>
        {% endfor %}
        <span class="separator u-fixed">â€¢</span>
      {% endif %}
      <time datetime="{{ page.date }}" class="u-fixed">{{ page.date | date(format=config.extra.date_format) }}</time>
    </div>

    <h1>{{ page.title }}</h1>

    <div class="post-author l-cluster" style="--space: 1.25rem; text-align: start;">
      <div class="author-avatar u-fixed">
        <img src="{{ get_url(path=config.extra.author_avatar) | safe }}" alt="{{ config.extra.author_name }}" />
      </div>
      <div class="author-info l-stack" style="--space: 0;">
        <span class="name">{{ config.extra.author_name }}</span>
        <span class="role">{{ config.extra.author_role }}</span>
      </div>
    </div>
  </header>

  <!-- Featured Image -->
  <div class="post-visual u-fixed" style="--fixed-width: 100%;">
    <img src="{{ image_macros::get_url(page=page, width=1600, height=900) }}" alt="{{ page.title }}" loading="eager" />
  </div>

  <!-- Content -->
  <div class="post-content s-post-content u-fill">
    {{ page.content | safe }}
  </div>

  <!-- Share Section -->
  <section class="post-share-section l-stack l-center" style="--space: var(--space-14); margin-block: var(--space-24) var(--space-16); padding-inline: var(--space-8); padding-block: var(--space-16);">
    <div class="share-header l-stack" style="--space: 0;">
      <span class="sub">Sharing is Caring</span>
      <h2 class="main">Enjoyed this post?</h2>
    </div>

    <div class="copy-card l-bar" style="--space: 1rem; padding-inline: 2rem 0.6rem; padding-block: 0.6rem;">
      <div class="url-display u-fill l-cluster" style="--space: 1rem; justify-content: flex-start;">
        <span class="u-fixed">{{ icons::link(size=5) }}</span>
        <span class="url-text u-fill js-share-url">{{ current_url | safe }}</span>
      </div>
      <button id="post-share-btn" class="copy-btn u-fixed js-share-btn">
        <span class="label js-share-label">Copy Link</span>
      </button>
    </div>

    <div class="social-actions l-cluster" style="--space: 1.5rem; justify-content: center;">
      <a href="https://twitter.com/intent/tweet?url={{ current_url | safe }}&text={{ page.title }}"
         target="_blank" rel="noopener noreferrer" class="action-item l-center u-fixed" title="Share on X">
        {{ icons::x(size=6) }}
      </a>

      <a href="{{ get_url(path='@/posts/_index.md') }}" class="action-item l-center u-fixed" title="Back to Archive">
        {{ icons::post(size=6) }}
      </a>

      <a href="/" class="action-item l-center u-fixed" title="Go Home">
        {{ icons::home(size=6) }}
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="post-footer l-stack" style="--space: clamp(2.5rem, 6vw, 4rem); margin-block-start: var(--space-16); padding-block-start: var(--space-16);">
    {% if page.taxonomies.tags %}
      <div class="post-tags l-cluster" style="--space: 0.75rem;">
        {% for tag in page.taxonomies.tags %}
          <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}">
            #{{ tag }}
          </a>
        {% endfor %}
      </div>
    {% endif %}

    <nav class="post-navigation l-grid" style="--min-width: 15rem; --space: 1.5rem;">
      {% if page.lower %}
        <a href="{{ page.lower.path }}" class="nav-card prev l-stack" style="--space: 0.75rem;">
          <span class="nav-label">Previous Post</span>
          <span class="nav-title">{{ page.lower.title }}</span>
        </a>
      {% endif %}

      {% if page.higher %}
        <a href="{{ page.higher.path }}" class="nav-card next l-stack" style="--space: 0.75rem;">
          <span class="nav-label">Next Post</span>
          <span class="nav-title">{{ page.higher.title }}</span>
        </a>
      {% endif %}
    </nav>
  </footer>

  <script src="{{ get_url(path='js/post.js') | safe }}"></script>
</article>
{% endblock content %}
