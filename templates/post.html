{% extends "base.html" %}
{% import "macros/image.html" as image_macros %}

{% block content %}
<article class="app-post">
  <!-- Post Header -->
  <header class="post-header">
    <div class="post-meta">
      {% if page.taxonomies.categories %}
        {% for cat in page.taxonomies.categories %}
          <span>{{ cat }}</span>
        {% endfor %}
        <span class="separator">â€¢</span>
      {% endif %}
      <time datetime="{{ page.date }}">{{ page.date | date(format=config.extra.date_format) }}</time>
    </div>

    <h1>{{ page.title }}</h1>

    <div class="post-author">
      <div class="author-avatar">
        <img src="{{ get_url(path=config.extra.author_avatar) | safe }}" alt="{{ config.extra.author_name }}" />
      </div>
      <div class="author-info">
        <span class="name">{{ config.extra.author_name }}</span>
        <span class="role">{{ config.extra.author_role }}</span>
      </div>
    </div>
  </header>

  <!-- Featured Image -->
  <div class="post-visual">
    <img src="{{ image_macros::get_url(page=page, width=1600, height=900) }}" alt="{{ page.title }}" loading="eager" />
  </div>

  <!-- Content -->
  <div class="post-content">
    {{ page.content | safe }}
  </div>

  <!-- Share Section -->
  <section class="post-share-section">
    <div class="share-header">
      <span class="sub">Sharing is Caring</span>
      <h2 class="main">Enjoyed this post?</h2>
    </div>

    <div class="copy-card">
      <div class="url-display">
        {{ icons::link(size=5) }}
        <span class="url-text">{{ current_url | safe }}</span>
      </div>
      <button id="post-share-btn" class="copy-btn">
        <span class="label">Copy Link</span>
      </button>
    </div>

    <div class="social-actions">
      <a href="https://twitter.com/intent/tweet?url={{ current_url | safe }}&text={{ page.title }}" 
         target="_blank" rel="noopener noreferrer" class="action-item" title="Share on X">
        {{ icons::x(size=6) }}
      </a>

      <a href="{{ get_url(path='@/posts/_index.md') }}" class="action-item" title="Back to Archive">
        {{ icons::post(size=6) }}
      </a>

      <a href="/" class="action-item" title="Go Home">
        {{ icons::home(size=6) }}
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="post-footer">
    {% if page.taxonomies.tags %}
      <div class="post-tags">
        {% for tag in page.taxonomies.tags %}
          <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}">
            #{{ tag }}
          </a>
        {% endfor %}
      </div>
    {% endif %}

    <nav class="post-navigation">
      {% if page.lower %}
        <a href="{{ page.lower.path }}" class="nav-card prev">
          <span class="nav-label">Previous Post</span>
          <span class="nav-title">{{ page.lower.title }}</span>
        </a>
      {% endif %}

      {% if page.higher %}
        <a href="{{ page.higher.path }}" class="nav-card next">
          <span class="nav-label">Next Post</span>
          <span class="nav-title">{{ page.higher.title }}</span>
        </a>
      {% endif %}
    </nav>
  </footer>

  <script src="{{ get_url(path='scripts/post.js') | safe }}"></script>
</article>
{% endblock content %}
