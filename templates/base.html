<!DOCTYPE html>
<html lang="en" data-theme="lofi">
  {% include "partials/head.html" %}

  <body class="bg-base-100 text-base-content antialiased">
    <div class="drawer drawer-end">
      <input id="mobile-drawer" type="checkbox" class="drawer-toggle" />
      <div class="drawer-content flex flex-col min-h-screen">
        <header>
          {% include "partials/navbar.html" %}
        </header>

        <!-- Main Content -->
        <div id="main-content" class="flex-grow container mx-auto max-w-screen-2xl px-4 py-8">
          {% block content %} {% endblock content %}
        </div>

        <footer>
          {% include "partials/footer.html" %}
        </footer>
      </div>

      <!-- Sidebar -->
      <div class="drawer-side z-50">
        <label for="mobile-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
        <ul class="menu p-6 w-80 min-h-full bg-base-100/95 backdrop-blur text-base-content">
          <li class="mb-8">
            <a
              href="/"
              class="text-2xl font-bold px-0 hover:bg-transparent"
              onclick="document.getElementById('mobile-drawer').checked = false;"
            >{{ config.title }}</a>
          </li>
          <li class="mb-2">
            <a
              href="{{ get_url(path='@/posts/_index.md') }}"
              class="text-lg font-medium gap-3"
              onclick="document.getElementById('mobile-drawer').checked = false;"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10l4 4v10a2 2 0 01-2 2z"
                />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 2v4a2 2 0 002 2h4" />
              </svg>
              Posts
            </a>
          </li>
          <li class="mb-2">
            <a
              href="{{ get_url(path='categories') }}"
              class="text-lg font-medium gap-3"
              onclick="document.getElementById('mobile-drawer').checked = false;"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 10h16M4 14h16M4 18h16"
                />
              </svg>
              Categories
            </a>
          </li>
          <li class="mb-2">
            <a
              href="{{ get_url(path='tags') }}"
              class="text-lg font-medium gap-3"
              onclick="document.getElementById('mobile-drawer').checked = false;"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"
                />
              </svg>
              Tags
            </a>
          </li>
          <div class="divider my-4"></div>
          <li>
            <button
              onclick="search_modal.showModal(); document.getElementById('mobile-drawer').checked = false;"
              class="text-lg font-medium gap-3"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                />
              </svg>
              Search
            </button>
          </li>
        </ul>
      </div>
    </div>

    <!-- Safeguard CSS for Drawer -->
    <style>
      .drawer {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: 1fr;
        width: 100%;
        min-height: 100vh;
      }

      .drawer-content {
        grid-column: 1;
        grid-row: 1;
        min-height: 0;
      }

      .drawer-side {
        grid-column: 1;
        grid-row: 1;
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: 1fr;
        visibility: hidden;
        pointer-events: none;
        overflow-y: auto;
        overscroll-behavior: contain;
        z-index: 9999;
      }

      .drawer-side > .drawer-overlay {
        grid-column: 1;
        grid-row: 1;
        background-color: transparent;
        transition: background-color 0.2s;
      }

      .drawer-side > .menu {
        grid-column: 1;
        grid-row: 1;
        justify-self: end;
        transform: translateX(100%);
        transition: transform 0.2s;
      }

      .drawer-toggle:checked ~ .drawer-side {
        visibility: visible;
        pointer-events: auto;
      }

      .drawer-toggle:checked ~ .drawer-side > .drawer-overlay {
        background-color: rgba(0, 0, 0, 0.4);
      }

      .drawer-toggle:checked ~ .drawer-side > .menu {
        transform: translateX(0);
      }
    </style>

    {% include "partials/search_modal.html" %} {% include "partials/scripts.html" %}
  </body>
</html>
