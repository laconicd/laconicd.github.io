{% import "macros/icons.html" as icons %}
{% import "macros/helpers.html" as helpers %}

{% macro view(brand="BRAND") %}
  {% set nav_brand = brand %}
  <nav class="navbar">
    <div class="container between">
      <a href="/" class="brand">{{ nav_brand }}</a>

      <!-- Shared Menu Trigger -->
      <button class="menu-trigger btn btn-ghost" popovertarget="index-popover" aria-label="Open Archive Index">
        <span class="trigger-text">INDEX</span>
        <span class="trigger-icon">{{ icons::menu() }}</span>
      </button>
    </div>
  </nav>

  <!-- Unified Index Popover -->
  <div id="index-popover" popover>
    <div class="popover-menu">
      <header class="header">
        <h3 class="title">THE ARCHIVE INDEX</h3>
        <button class="close-btn" popovertarget="index-popover" popovertargetaction="hide" aria-label="Close menu">
          {{ icons::close(size=6) }}
        </button>
      </header>

      <nav class="body">
        <ul class="list list-blank">
          {{ helpers::navbar_link(url="/", text="The Front Page", current_path=current_path, index=1) }}
          {{ helpers::navbar_link(url="/insights", text="Insights", current_path=current_path, index=2) }}
          {{ helpers::navbar_link(url="/themes", text="Themes", current_path=current_path, index=3) }}
          {{ helpers::navbar_link(url="/lexicon", text="Lexicon", current_path=current_path, index=4) }}
          {{ helpers::navbar_link(url="/about", text="About", current_path=current_path, index=5) }}
        </ul>
      </nav>

      <footer class="footer">
        <div class="social-links">
          {{ helpers::social_icon(url=config.extra.github, platform="GitHub", icon_name="github") }}
          {{ helpers::social_icon(url=config.extra.twitter, platform="Twitter", icon_name="twitter") }}
          {{ helpers::social_icon(url=config.extra.linkedin, platform="LinkedIn", icon_name="linkedin") }}
        </div>
        <p class="copyright">{{ helpers::copyright(name=config.title) }}</p>
      </footer>
    </div>
  </div>
{% endmacro %}
