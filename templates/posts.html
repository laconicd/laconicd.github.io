{% extends "base.html" %}
{% import "macros/icons.html" as icons %}
{% import "macros/image.html" as image_macros %}

{% block content %}
  <div class="l-container l-stack u-gap-20 u-py-20" style="padding-block-end: 10rem;">
    <header class="c-hero-title l-stack l-center u-text-center">
      <h1>{{ section.title }}</h1>
      <p>{{ config.extra.posts_subtitle }}</p>
    </header>

    {% set blog_section = get_section(path="posts/_index.md") %}

    {% if blog_section.pages | length > 0 %}
      {# Latest Post as Featured #}
      {% set featured = blog_section.pages[0] %}

      <section class="c-hero-card">
        <a href="{{ featured.path }}" class="featured-card l-grid u-gap-0" style="--min-width: 100%; grid-template-columns: 1.3fr 0.7fr;">
          <div class="featured-image">
            <img
              src="{{ image_macros::get_url(page=featured, width=1200, height=800) }}"
              alt="{{ featured.title }}"
              loading="lazy"
            />
          </div>
          <div class="featured-content l-stack l-center u-gap-8" style="justify-content: center;">
            <span class="featured-badge u-fixed">Featured</span>
            <h2>{{ featured.title }}</h2>
            <p>{{ featured.summary | default(value=featured.description) | default(value="") | striptags | safe }}</p>
            <div class="featured-footer l-cluster u-gap-6" style="justify-content: flex-start; align-items: center; margin-block-start: var(--space-4);">
              <span>Keep Reading</span>
              <span class="arrow c-icon-circle u-fixed">{{ icons::arrow_right(size=4) }}</span>
            </div>
          </div>
        </a>
      </section>

      <div class="c-divider l-cluster l-center u-gap-10">The Collection</div>

      <section class="l-grid" aria-label="All Posts" style="--min-width: 20rem; --space: 4rem 2.5rem;">
        {% for page in blog_section.pages | slice(start=1) %}
          {% include "partials/post-card.html" %}
        {% endfor %}
      </section>
    {% else %}
      <div class="l-center u-py-24">
        <p style="font-size: 1.5rem; font-weight: bold; opacity: 0.2; font-style: italic;">
          The ink hasn't dried yet...
        </p>
      </div>
    {% endif %}
  </div>
{% endblock content %}
