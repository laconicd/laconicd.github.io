{% import "macros/icons.html" as icons %}
<style>
  @scope(.app-post-card) {
    :scope {
      display: block;
      margin-bottom: 0.5rem;
    }

    & .card-link {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      padding: 1.5rem;
      border-radius: 2rem;
      background: transparent;
      transition: all 0.4s var(--ease-standard);
      text-decoration: none;
      color: inherit;
      border: 1px solid transparent;

      &:hover {
        background: var(--color-base-200);
        transform: translateY(-4px);
        border-color: oklch(from var(--color-base-content) l c h / 0.05);
        box-shadow: var(--shadow-2);

        & .thumb img { transform: scale(1.1); }
        & .action-arrow { 
          transform: translateX(6px) rotate(-45deg); 
          opacity: 1; 
          background: var(--color-base-content); 
          color: var(--color-base-100); 
          box-shadow: var(--shadow-2);
        }
      }
    }

    & .thumb {
      flex-shrink: 0;
      width: 6rem;
      height: 6rem;
      border-radius: 1.5rem;
      overflow: hidden;
      background: var(--color-base-300);
      
      & img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s var(--ease-standard);
      }
    }

    & .body {
      flex: 1;
      min-width: 0;
    }

    & .meta {
      font-size: 0.7rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      opacity: 0.4;
      margin-bottom: 0.5rem;
    }

    & .title {
      font-size: 1.5rem;
      font-weight: 800;
      line-height: 1.2;
      letter-spacing: -0.02em;
      margin-bottom: 0.5rem;
      display: -webkit-box;
      -webkit-line-clamp: 1;
      -webkit-box-orient: vertical;
      overflow: hidden;
      transition: color 0.3s;
    }

    & .summary {
      font-size: 0.95rem;
      color: oklch(from var(--color-base-content) l c h / 0.5);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.5;
    }

    & .action-arrow {
      width: 2.25rem;
      height: 2.25rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: oklch(from var(--color-base-content) l c h / 0.03);
      border: 1px solid oklch(from var(--color-base-content) l c h / 0.08);
      color: var(--color-base-content);
      opacity: 0.5;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @media (width < 48rem) {
      & .card-link { padding: 1rem; gap: 1rem; }
      & .thumb { width: 4.5rem; height: 4.5rem; border-radius: 1rem; }
      & .title { font-size: 1.15rem; margin-bottom: 0.25rem; }
      & .summary { display: none; }
      & .action-arrow { display: none; }
    }
  }
</style>

<div class="app-post-card">
  <a href="{{ page.path }}" class="card-link">
    <div class="thumb">
      {% if page.extra.image %}
        {% set image_path = "static/media/" ~ page.relative_path | replace(from="index.md", to=page.extra.image) %}
        {% set mini_thumb = resize_image(path=image_path, width=200, height=200, op="fill", format="webp") %}
        <img src="{{ mini_thumb.url }}" alt="{{ page.title }}" loading="lazy" />
      {% else %}
        <img src="{{ get_url(path='images/default-post.jpg') }}" alt="" class="opacity-40" loading="lazy" />
      {% endif %}
    </div>
    <div class="body">
      <div class="meta">{{ page.date | date(format="%b %d, %Y") }}</div>
      <h3 class="title">{{ page.title }}</h3>
      <p class="summary">{{ page.summary | default(value=page.description) | default(value="") | striptags | safe }}</p>
    </div>
    <div class="action-arrow">
      {{ icons::arrow_right(size=3) }}
    </div>
  </a>
</div>
