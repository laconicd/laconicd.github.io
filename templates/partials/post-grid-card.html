<post-grid-card class="group">
  <template shadowrootmode="open">
    <style>
      :host {
        display: block;
        height: 100%;
      }

      .card {
        display: flex;
        flex-direction: column;
        height: 100%;
        background-color: var(--fallback-b1, oklch(var(--b1)));
        border-radius: 1.5rem;
        border: 1px solid var(--fallback-b2, oklch(var(--b2)));
        overflow: hidden;
        transition: all 0.3s;
        position: relative;
      }

      :host(:hover) .card {
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
      }

      .media-area {
        position: relative;
        aspect-ratio: 16 / 9;
        background-color: var(--fallback-b2, oklch(var(--b2)));
        overflow: hidden;
      }

      .content-area {
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        flex: 1;
      }

      @media (min-width: 768px) {
        .content-area {
          padding: 2rem;
        }
      }
    </style>
    <article class="card">
      <slot name="link"></slot>
      <div class="media-area">
        <slot name="image"></slot>
        <slot name="badges"></slot>
      </div>
      <div class="content-area">
        <slot name="author"></slot>
        <slot name="title"></slot>
        <slot name="summary"></slot>
        <slot name="tags"></slot>
        <slot name="footer"></slot>
      </div>
    </article>
  </template>

  <a slot="link" href="{{ page.path }}" class="absolute inset-0 z-20" aria-label="{{ page.title }}"></a>

  <div slot="image" class="w-full h-full">
    {% if page.extra.image %}
    {% set image_path = page.relative_path | replace(from="index.md", to=page.extra.image) %}
    {% set thumb = resize_image(path=image_path, width=600, height=338, op="fill", format="webp") %}
    <img src="{{ thumb.url }}" alt="" class="w-full h-full object-cover transition duration-500 group-hover:scale-105"
      loading="lazy" />
    {% else %}
    <img src="{{ get_url(path='images/default-post.jpg') }}" alt=""
      class="w-full h-full object-cover transition duration-500 group-hover:scale-105 opacity-80" loading="lazy" />
    {% endif %}
  </div>

  <div slot="badges">
    <div class="absolute top-4 left-4 z-10">
      <span class="badge badge-neutral font-black uppercase text-[10px] tracking-wider border-none">
        {{ page.date | date(format="%b %d, %Y") }}
      </span>
    </div>

    {% if page.taxonomies.categories %}
    <div class="absolute bottom-4 left-4 z-10 flex flex-wrap gap-1">
      {% for cat in page.taxonomies.categories %}
      <span class="badge badge-primary font-bold uppercase text-[9px] border-none px-2">
        {{ cat }}
      </span>
      {% endfor %}
    </div>
    {% endif %}
  </div>

  <div slot="author"
    class="flex items-center gap-3 mb-4 md:mb-6 text-[10px] md:text-xs font-black uppercase tracking-widest text-primary">
    <div class="avatar">
      <div class="size-6 md:size-7 rounded-lg ring ring-base-200 ring-offset-2">
        <img src="{{ get_url(path=config.extra.author_avatar) | safe }}" alt="" />
      </div>
    </div>
    <span>{{ page.authors | join(sep=", ") }}</span>
  </div>

  <h2 slot="title"
    class="text-xl md:text-2xl font-black tracking-tight leading-tight mb-3 md:mb-4 group-hover:text-primary transition-colors line-clamp-2">
    {{ page.title }}
  </h2>

  <p slot="summary" class="text-sm opacity-60 line-clamp-2 md:line-clamp-3 mb-4 md:mb-6 flex-1">
    {{ page.summary | default(value=page.description) | default(value="") | striptags | safe }}
  </p>

  {% if page.taxonomies.tags %}
  <div slot="tags"
    class="flex flex-wrap gap-x-2 mb-6 md:mb-8 text-[10px] md:text-xs font-bold text-base-content/40 italic">
    {% for tag in page.taxonomies.tags %}
    <span class="hover:text-primary transition-colors">#{{ tag }}</span>
    {% endfor %}
  </div>
  {% endif %}

  <div slot="footer" class="flex items-center justify-between pt-4 md:pt-6 border-t border-base-200 mt-auto">
    <span
      class="text-[10px] md:text-xs font-black uppercase tracking-widest opacity-40 group-hover:opacity-100 group-hover:text-primary transition-all">
      Read More
    </span>
    <div
      class="size-7 md:size-8 rounded-full bg-base-200 flex items-center justify-center group-hover:bg-primary group-hover:text-primary-content transition-colors">
      {{ icons::arrow_right(size=4) }}
    </div>
  </div>
</post-grid-card>