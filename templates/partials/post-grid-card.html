{% import "macros/icons.html" as icons %}

<article class="app-post-grid-card">
  <div class="card">
    <a href="{{ page.path }}" class="page-link" aria-label="Read: {{ page.title }}"></a>
    
    <div class="media-area">
      {% if page.extra.image %}
        {% set path_parts = page.relative_path | split(pat="/") %}
        {% set dir_path = path_parts | slice(end=-1) | join(sep="/") %}
        {% set image_path = "static/media/" ~ dir_path ~ "/" ~ page.extra.image %}
        {% set thumb = resize_image(path=image_path, width=800, height=600, op="fill", format="webp") %}
        <img src="{{ thumb.url }}" alt="{{ page.title }}" loading="lazy" />
      {% else %}
        <img src="{{ get_url(path='images/default-post.jpg') }}" alt="" loading="lazy" />
      {% endif %}
    </div>

    <div class="content-area">
      <div class="meta">
        <time datetime="{{ page.date }}">{{ page.date | date(format="%b %d, %Y") }}</time>
        <span class="dot">â€¢</span>
        <span>{{ page.reading_time }} min read</span>
      </div>

      <h3 class="title">{{ page.title }}</h3>

      <p class="summary">
        {{ page.summary | default(value=page.description) | default(value="") | striptags | safe }}
      </p>

      {% if page.taxonomies.tags %}
      <div class="tags">
        {% for tag in page.taxonomies.tags | slice(end=3) %}
        <span class="tag">#{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <div class="footer-area">
      <span>Read Story</span>
      <span class="arrow">{{ icons::arrow_right(size=2.5) }}</span>
    </div>
  </div>
</article>
