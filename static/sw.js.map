{
  "version": 3,
  "sources": ["../scripts/sw.ts"],
  "sourcesContent": ["/// <reference lib=\"webworker\" />\n\nexport {};\n\ndeclare const self: ServiceWorkerGlobalScope;\n\nclass BlogServiceWorker {\n  private readonly CACHE_NAME = \"the-blog-cache-v1\";\n  private readonly ASSETS = [\"/\", \"/styles/main.css\", \"/js/main.js\", \"/manifest.json\"];\n\n  constructor() {\n    this.init();\n  }\n\n  private init(): void {\n    // 서비스 워커 이벤트 리스너 등록\n    // .bind(this)를 통해 클래스 내부 메서드에서도 this가 클래스 인스턴스를 가리키도록 함\n    self.addEventListener(\"install\", (e) => this.handleInstall(e));\n    self.addEventListener(\"activate\", (e) => this.handleActivate(e));\n    self.addEventListener(\"fetch\", (e) => this.handleFetch(e));\n  }\n\n  /**\n   * 설치 단계: 정적 자산 캐싱\n   */\n  private handleInstall(event: ExtendableEvent): void {\n    event.waitUntil(\n      caches.open(this.CACHE_NAME).then((cache) => {\n        console.log(\"[SW] Caching static assets\");\n        return cache.addAll(this.ASSETS);\n      }),\n    );\n  }\n\n  /**\n   * 활성화 단계: 오래된 캐시 정리 (추가됨)\n   */\n  private handleActivate(event: ExtendableEvent): void {\n    event.waitUntil(\n      caches.keys().then((cacheNames) => {\n        return Promise.all(\n          cacheNames.map((name) => {\n            if (name !== this.CACHE_NAME) {\n              console.log(\"[SW] Deleting old cache:\", name);\n              return caches.delete(name);\n            }\n          }),\n        );\n      }),\n    );\n  }\n\n  /**\n   * 요청 가로채기: 캐시 우선 전략 (Cache First)\n   */\n  private handleFetch(event: FetchEvent): void {\n    event.respondWith(\n      caches.match(event.request).then((response) => {\n        // 캐시에 있으면 반환, 없으면 네트워크 요청\n        return response || fetch(event.request);\n      }),\n    );\n  }\n}\n\n// 서비스 워커 인스턴스 생성\nnew BlogServiceWorker();\n"],
  "mappings": "AAMA,IAAMA,EAAN,KAAM,CACa,WAAa,oBACb,OAAS,CAAC,IAAK,mBAAoB,cAAe,kBAEnE,aAAc,CACZ,KAAK,KAAI,CACX,CAEQ,MAAa,CAGnB,KAAK,iBAAiB,UAAYC,GAAM,KAAK,cAAcA,CAAA,CAAA,EAC3D,KAAK,iBAAiB,WAAaA,GAAM,KAAK,eAAeA,CAAA,CAAA,EAC7D,KAAK,iBAAiB,QAAUA,GAAM,KAAK,YAAYA,CAAA,CAAA,CACzD,CAKQ,cAAcC,EAA8B,CAClDA,EAAM,UACJ,OAAO,KAAK,KAAK,UAAU,EAAE,KAAMC,IACjC,QAAQ,IAAI,4BAAA,EACLA,EAAM,OAAO,KAAK,MAAM,EACjC,CAAA,CAEJ,CAKQ,eAAeD,EAA8B,CACnDA,EAAM,UACJ,OAAO,KAAI,EAAG,KAAME,GACX,QAAQ,IACbA,EAAW,IAAKC,GAAA,CACd,GAAIA,IAAS,KAAK,WAChB,eAAQ,IAAI,2BAA4BA,CAAA,EACjC,OAAO,OAAOA,CAAA,CAEzB,CAAA,CAAA,CAEJ,CAAA,CAEJ,CAKQ,YAAYH,EAAyB,CAC3CA,EAAM,YACJ,OAAO,MAAMA,EAAM,OAAO,EAAE,KAAMI,GAEzBA,GAAY,MAAMJ,EAAM,OAAO,CACxC,CAAA,CAEJ,CACF,EAGA,IAAIF",
  "names": ["BlogServiceWorker", "e", "event", "cache", "cacheNames", "name", "response"]
}
